#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Script para implementar estrat√©gias de remarketing da Fenix Academy
CEO: Lucas Silva Petris
"""

import json
import os
from datetime import datetime, timedelta

class FenixRemarketingStrategy:
    def __init__(self):
        self.company_data = {
            "name": "Fenix Academy",
            "ceo": "Lucas Silva Petris",
            "current_revenue": 45000,
            "total_students": 1250,
            "completion_rate": 78.5
        }
        
        self.remarketing_config = {}
        self.audience_segments = {}
        self.campaign_strategies = {}
        
    def setup_google_ads_remarketing(self):
        """Configura estrat√©gias de remarketing no Google Ads"""
        
        print("üöÄ Configurando Google Ads Remarketing...")
        
        self.remarketing_config["google_ads"] = {
            "audiences": {
                "visitantes_site": {
                    "criteria": "Visitou o site nos √∫ltimos 30 dias",
                    "exclusions": "J√° comprou curso",
                    "bid_adjustment": 1.5,
                    "budget": 2000,
                    "roi_target": 400
                },
                "abandonou_carrinho": {
                    "criteria": "Adicionou curso ao carrinho mas n√£o comprou",
                    "exclusions": "Visitou p√°gina de pagamento",
                    "bid_adjustment": 2.0,
                    "budget": 1500,
                    "roi_target": 600
                },
                "visualizou_curso": {
                    "criteria": "Visualizou p√°gina de curso espec√≠fico",
                    "exclusions": "J√° comprou este curso",
                    "bid_adjustment": 1.8,
                    "budget": 1000,
                    "roi_target": 500
                }
            },
            "campaigns": [
                {
                    "name": "Remarketing - Visitantes Gerais",
                    "audience": "visitantes_site",
                    "budget": 2000,
                    "duration": "30 dias",
                    "messages": [
                        "Continue seu aprendizado na Fenix Academy",
                        "Oferta especial para voc√™: 20% de desconto",
                        "N√£o perca a oportunidade de dominar tecnologia"
                    ]
                },
                {
                    "name": "Remarketing - Abandono de Carrinho",
                    "audience": "abandonou_carrinho",
                    "budget": 1500,
                    "duration": "7 dias",
                    "messages": [
                        "Complete sua compra - Oferta expira em 24h",
                        "Desconto de 20% v√°lido por 48h",
                        "√öltima chance: B√¥nus exclusivo inclu√≠do"
                    ]
                },
                {
                    "name": "Remarketing - Interesse Espec√≠fico",
                    "audience": "visualizou_curso",
                    "budget": 1000,
                    "duration": "14 dias",
                    "messages": [
                        "Domine [tecnologia] com projetos pr√°ticos",
                        "Curso completo + mentoria individual",
                        "Certificado reconhecido pelo mercado"
                    ]
                }
            ]
        }
        
        print("‚úÖ Google Ads Remarketing configurado!")
        return self.remarketing_config["google_ads"]
    
    def setup_facebook_instagram_remarketing(self):
        """Configura estrat√©gias de remarketing no Facebook/Instagram"""
        
        print("üìò Configurando Facebook/Instagram Remarketing...")
        
        self.remarketing_config["facebook_instagram"] = {
            "audiences": {
                "engajamento_alto": {
                    "criteria": "Interagiu com posts da Fenix",
                    "exclusions": "J√° √© aluno",
                    "lookalike": "1% similar aos melhores alunos",
                    "budget": 1500,
                    "roi_target": 350
                },
                "interesse_tecnologia": {
                    "criteria": "Interesse em programa√ß√£o, desenvolvimento",
                    "exclusions": "J√° comprou curso",
                    "lookalike": "2% similar aos alunos existentes",
                    "budget": 2000,
                    "roi_target": 400
                },
                "visitantes_landing": {
                    "criteria": "Visitou landing page espec√≠fica",
                    "exclusions": "Convertido",
                    "lookalike": "1% similar aos convertidos",
                    "budget": 1000,
                    "roi_target": 450
                }
            },
            "content_strategies": [
                {
                    "type": "V√≠deos de Depoimentos",
                    "description": "Alunos que conseguiram emprego",
                    "frequency": "2x por semana",
                    "budget": 500
                },
                {
                    "type": "Sneak Peeks",
                    "description": "Aulas gratuitas dos cursos",
                    "frequency": "1x por semana",
                    "budget": 300
                },
                {
                    "type": "Webinars ao Vivo",
                    "description": "Especialistas da ind√∫stria",
                    "frequency": "2x por m√™s",
                    "budget": 800
                },
                {
                    "type": "Cases de Sucesso",
                    "description": "Projetos reais dos alunos",
                    "frequency": "1x por semana",
                    "budget": 400
                }
            ]
        }
        
        print("‚úÖ Facebook/Instagram Remarketing configurado!")
        return self.remarketing_config["facebook_instagram"]
    
    def setup_email_marketing_remarketing(self):
        """Configura estrat√©gias de email marketing remarketing"""
        
        print("üìß Configurando Email Marketing Remarketing...")
        
        self.remarketing_config["email_marketing"] = {
            "sequences": {
                "abandonou_curso": [
                    {
                        "day": 1,
                        "subject": "Continue de onde parou",
                        "content": "Lembrete do curso [nome] que voc√™ estava visualizando",
                        "offer": "Acesso gratuito por 7 dias"
                    },
                    {
                        "day": 3,
                        "subject": "Oferta especial para voc√™",
                        "content": "20% de desconto v√°lido por 48h",
                        "offer": "Desconto + b√¥nus exclusivo"
                    },
                    {
                        "day": 7,
                        "subject": "√öltima chance",
                        "content": "Oferta expira em 24h + b√¥nus exclusivo",
                        "offer": "30% de desconto + mentoria"
                    }
                ],
                "visitou_site": [
                    {
                        "day": 1,
                        "subject": "Bem-vindo √† Fenix Academy",
                        "content": "Guia gratuito: Como escolher seu primeiro curso",
                        "offer": "Download gratuito"
                    },
                    {
                        "day": 5,
                        "subject": "Dica exclusiva para iniciantes",
                        "content": "5 tecnologias que est√£o bombando em 2024",
                        "offer": "Aula gratuita"
                    },
                    {
                        "day": 10,
                        "subject": "Oferta especial para novos visitantes",
                        "content": "Primeiro curso com 30% de desconto",
                        "offer": "Desconto + comunidade VIP"
                    }
                ],
                "alunos_inativos": [
                    {
                        "day": 1,
                        "subject": "Sua jornada n√£o terminou aqui",
                        "content": "Continue aprendendo e dominando tecnologia",
                        "offer": "Acesso gratuito por 7 dias"
                    },
                    {
                        "day": 7,
                        "subject": "O que voc√™ est√° perdendo?",
                        "content": "Novos cursos e atualiza√ß√µes dispon√≠veis",
                        "offer": "50% de desconto em qualquer curso"
                    },
                    {
                        "day": 14,
                        "subject": "√öltima oportunidade",
                        "content": "N√£o deixe sua carreira parar",
                        "offer": "Acesso vital√≠cio com 70% de desconto"
                    }
                ]
            },
            "automation_rules": {
                "triggers": [
                    "Visualizou p√°gina de curso",
                    "Adicionou ao carrinho",
                    "Abandonou checkout",
                    "N√£o acessou em 30 dias",
                    "Completou curso"
                ],
                "actions": [
                    "Enviar email personalizado",
                    "Aplicar desconto",
                    "Oferecer b√¥nus",
                    "Agendar follow-up",
                    "Atualizar segmento"
                ]
            }
        }
        
        print("‚úÖ Email Marketing Remarketing configurado!")
        return self.remarketing_config["email_marketing"]
    
    def setup_advanced_segmentation(self):
        """Configura segmenta√ß√£o avan√ßada para remarketing"""
        
        print("üéØ Configurando Segmenta√ß√£o Avan√ßada...")
        
        self.audience_segments = {
            "alunos_inativos": {
                "criteria": "N√£o acessaram plataforma em 30 dias",
                "remarketing_channels": ["Email", "Facebook", "Google Ads"],
                "message": "Continue sua jornada de aprendizado",
                "offer": "Acesso gratuito por 7 dias",
                "roi_target": 800,
                "estimated_size": 250
            },
            "alunos_parciais": {
                "criteria": "Come√ßaram mas n√£o terminaram curso",
                "remarketing_channels": ["Email", "Notifica√ß√µes push"],
                "message": "Complete seu curso e receba certificado",
                "offer": "Mentoria individual gratuita",
                "roi_target": 600,
                "estimated_size": 180
            },
            "alunos_satisfeitos": {
                "criteria": "Completaram curso com nota alta",
                "remarketing_channels": ["Email", "Programa de refer√™ncia"],
                "message": "Indique amigos e ganhe b√¥nus",
                "offer": "20% de comiss√£o por indica√ß√£o",
                "roi_target": 1000,
                "estimated_size": 320
            },
            "alunos_engajados": {
                "criteria": "Participam ativamente da comunidade",
                "remarketing_channels": ["Email", "Programa de embaixadores"],
                "message": "Seja um embaixador da Fenix",
                "offer": "Acesso VIP + comiss√µes especiais",
                "roi_target": 1200,
                "estimated_size": 150
            }
        }
        
        print("‚úÖ Segmenta√ß√£o Avan√ßada configurada!")
        return self.audience_segments
    
    def create_campaign_strategies(self):
        """Cria estrat√©gias de campanhas integradas"""
        
        print("üìä Criando Estrat√©gias de Campanhas...")
        
        self.campaign_strategies = {
            "black_friday": {
                "duration": "15 dias",
                "total_budget": 10000,
                "channels": ["Google Ads", "Facebook", "Instagram", "Email"],
                "audiences": ["Todos os segmentos", "Visitantes recentes", "Alunos inativos"],
                "offers": [
                    "50% de desconto em todos os cursos",
                    "Acesso vital√≠cio com pre√ßo especial",
                    "B√¥nus: Mentoria individual + comunidade VIP"
                ],
                "roi_target": 500,
                "conversion_target": 200
            },
            "novos_cursos": {
                "duration": "30 dias",
                "total_budget": 5000,
                "channels": ["Google Ads", "Facebook", "Email"],
                "audiences": ["Alunos ativos", "Interesse em tecnologia", "Visitantes recentes"],
                "offers": [
                    "Acesso antecipado a novos cursos",
                    "Desconto de 30% para alunos existentes",
                    "B√¥nus: Workshop exclusivo"
                ],
                "roi_target": 400,
                "conversion_target": 100
            },
            "retencao": {
                "duration": "Cont√≠nuo",
                "total_budget": 3000,
                "channels": ["Email", "Notifica√ß√µes push", "Facebook"],
                "audiences": ["Alunos parciais", "Alunos inativos", "Baixo engajamento"],
                "offers": [
                    "Acesso gratuito por 7 dias",
                    "Mentoria individual",
                    "Descontos progressivos"
                ],
                "roi_target": 800,
                "conversion_target": 150
            }
        }
        
        print("‚úÖ Estrat√©gias de Campanhas criadas!")
        return self.campaign_strategies
    
    def calculate_roi_projections(self):
        """Calcula proje√ß√µes de ROI para as estrat√©gias"""
        
        print("üí∞ Calculando Proje√ß√µes de ROI...")
        
        total_investment = 0
        projected_revenue = 0
        
        # Google Ads
        google_ads = self.remarketing_config.get("google_ads", {})
        for audience in google_ads.get("audiences", {}).values():
            total_investment += audience.get("budget", 0)
            projected_revenue += audience.get("budget", 0) * (audience.get("roi_target", 0) / 100)
        
        # Facebook/Instagram
        facebook = self.remarketing_config.get("facebook_instagram", {})
        for audience in facebook.get("audiences", {}).values():
            total_investment += audience.get("budget", 0)
            projected_revenue += audience.get("budget", 0) * (facebook.get("audiences", {}).get("roi_target", 0) / 100)
        
        # Campanhas especiais
        for campaign in self.campaign_strategies.values():
            total_investment += campaign.get("total_budget", 0)
            projected_revenue += campaign.get("total_budget", 0) * (campaign.get("roi_target", 0) / 100)
        
        roi_percentage = ((projected_revenue - total_investment) / total_investment) * 100 if total_investment > 0 else 0
        
        projections = {
            "total_investment": total_investment,
            "projected_revenue": projected_revenue,
            "projected_profit": projected_revenue - total_investment,
            "roi_percentage": roi_percentage,
            "breakdown": {
                "google_ads": {
                    "investment": sum(a.get("budget", 0) for a in google_ads.get("audiences", {}).values()),
                    "projected_revenue": sum(a.get("budget", 0) * (a.get("roi_target", 0) / 100) for a in google_ads.get("audiences", {}).values())
                },
                "facebook_instagram": {
                    "investment": sum(a.get("budget", 0) for a in facebook.get("audiences", {}).values()),
                    "projected_revenue": sum(a.get("budget", 0) * (facebook.get("audiences", {}).get("roi_target", 0) / 100) for a in facebook.get("audiences", {}).values())
                },
                "special_campaigns": {
                    "investment": sum(c.get("total_budget", 0) for c in self.campaign_strategies.values()),
                    "projected_revenue": sum(c.get("total_budget", 0) * (c.get("roi_target", 0) / 100) for c in self.campaign_strategies.values())
                }
            }
        }
        
        print("‚úÖ Proje√ß√µes de ROI calculadas!")
        return projections
    
    def generate_implementation_plan(self):
        """Gera plano de implementa√ß√£o detalhado"""
        
        print("üìã Gerando Plano de Implementa√ß√£o...")
        
        implementation_plan = {
            "phase_1_week_1": {
                "title": "Configura√ß√£o Inicial",
                "tasks": [
                    "Configurar Google Ads Remarketing",
                    "Implementar Facebook Pixel",
                    "Criar primeiras audiences customizadas",
                    "Configurar Google Analytics 4"
                ],
                "deliverables": [
                    "Audiences configuradas no Google Ads",
                    "Pixel funcionando no site",
                    "Eventos sendo rastreados"
                ],
                "estimated_hours": 16
            },
            "phase_2_week_2_3": {
                "title": "Automa√ß√£o e Campanhas",
                "tasks": [
                    "Configurar automa√ß√£o de emails",
                    "Criar campanhas de remarketing",
                    "Implementar tracking de eventos",
                    "Configurar sequ√™ncias de email"
                ],
                "deliverables": [
                    "Sequ√™ncias de email funcionando",
                    "Campanhas ativas no Google Ads",
                    "Sistema de tracking implementado"
                ],
                "estimated_hours": 24
            },
            "phase_3_month_1": {
                "title": "Otimiza√ß√£o e Expans√£o",
                "tasks": [
                    "Otimizar campanhas baseado em dados",
                    "Expandir para novos canais",
                    "Implementar segmenta√ß√£o avan√ßada",
                    "Ajustar bids e or√ßamentos"
                ],
                "deliverables": [
                    "Campanhas otimizadas",
                    "Novos canais ativos",
                    "Segmenta√ß√£o implementada"
                ],
                "estimated_hours": 20
            },
            "phase_4_month_2_3": {
                "title": "An√°lise e Ajustes",
                "tasks": [
                    "An√°lise completa de performance",
                    "Ajustes estrat√©gicos",
                    "Planejamento de expans√£o",
                    "Relat√≥rio de resultados"
                ],
                "deliverables": [
                    "Relat√≥rio de performance",
                    "Ajustes implementados",
                    "Plano de expans√£o"
                ],
                "estimated_hours": 16
            }
        }
        
        print("‚úÖ Plano de Implementa√ß√£o gerado!")
        return implementation_plan
    
    def save_strategy_to_file(self):
        """Salva toda a estrat√©gia em arquivo JSON"""
        
        strategy_data = {
            "company_info": self.company_data,
            "remarketing_config": self.remarketing_config,
            "audience_segments": self.audience_segments,
            "campaign_strategies": self.campaign_strategies,
            "roi_projections": self.calculate_roi_projections(),
            "implementation_plan": self.generate_implementation_plan(),
            "created_at": datetime.now().isoformat(),
            "version": "1.0"
        }
        
        filename = f"fenix_remarketing_strategy_{datetime.now().strftime('%Y%m%d_%H%M%S')}.json"
        
        with open(filename, 'w', encoding='utf-8') as f:
            json.dump(strategy_data, f, indent=2, ensure_ascii=False)
        
        print(f"üíæ Estrat√©gia salva em: {filename}")
        return filename
    
    def print_summary(self):
        """Imprime resumo da estrat√©gia implementada"""
        
        print("\n" + "="*80)
        print("üéØ RESUMO DA ESTRAT√âGIA DE REMARKETING - FENIX ACADEMY")
        print("="*80)
        
        print(f"\nüë®‚Äçüíº CEO: {self.company_data['ceo']}")
        print(f"üè¢ Empresa: {self.company_data['name']}")
        print(f"üí∞ Receita Atual: R$ {self.company_data['current_revenue']:,}/m√™s")
        print(f"üë• Total de Alunos: {self.company_data['total_students']:,}")
        
        print("\nüöÄ CANAIS DE REMARKETING CONFIGURADOS:")
        
        # Google Ads
        if "google_ads" in self.remarketing_config:
            google_ads = self.remarketing_config["google_ads"]
            total_budget = sum(a.get("budget", 0) for a in google_ads.get("audiences", {}).values())
            print(f"   üì± Google Ads: R$ {total_budget:,}/m√™s")
        
        # Facebook/Instagram
        if "facebook_instagram" in self.remarketing_config:
            facebook = self.remarketing_config["facebook_instagram"]
            total_budget = sum(a.get("budget", 0) for a in facebook.get("audiences", {}).values())
            print(f"   üìò Facebook/Instagram: R$ {total_budget:,}/m√™s")
        
        # Email Marketing
        if "email_marketing" in self.remarketing_config:
            print(f"   üìß Email Marketing: Configurado com automa√ß√£o")
        
        print(f"\nüéØ AUDI√äNCIAS SEGMENTADAS: {len(self.audience_segments)}")
        for segment_name, segment_data in self.audience_segments.items():
            print(f"   ‚Ä¢ {segment_name}: {segment_data.get('estimated_size', 0)} usu√°rios")
        
        print(f"\nüìä CAMPANHAS ESPECIAIS: {len(self.campaign_strategies)}")
        for campaign_name, campaign_data in self.campaign_strategies.items():
            print(f"   ‚Ä¢ {campaign_name}: R$ {campaign_data.get('total_budget', 0):,}")
        
        # ROI Projections
        roi_data = self.calculate_roi_projections()
        print(f"\nüí∞ PROJE√á√ïES DE ROI:")
        print(f"   ‚Ä¢ Investimento Total: R$ {roi_data['total_investment']:,}")
        print(f"   ‚Ä¢ Receita Projetada: R$ {roi_data['projected_revenue']:,}")
        print(f"   ‚Ä¢ Lucro Projetado: R$ {roi_data['projected_profit']:,}")
        print(f"   ‚Ä¢ ROI Projetado: {roi_data['roi_percentage']:.1f}%")
        
        print(f"\n‚è±Ô∏è TEMPO TOTAL DE IMPLEMENTA√á√ÉO: 76 horas")
        print(f"üìÖ DURA√á√ÉO TOTAL: 3 meses")
        
        print("\n" + "="*80)
        print("‚úÖ ESTRAT√âGIA COMPLETA IMPLEMENTADA!")
        print("="*80)

def main():
    """Fun√ß√£o principal para executar a implementa√ß√£o"""
    
    print("üöÄ IMPLEMENTANDO ESTRAT√âGIA DE REMARKETING - FENIX ACADEMY")
    print("="*80)
    
    # Criar inst√¢ncia da estrat√©gia
    strategy = FenixRemarketingStrategy()
    
    # Implementar todas as estrat√©gias
    strategy.setup_google_ads_remarketing()
    strategy.setup_facebook_instagram_remarketing()
    strategy.setup_email_marketing_remarketing()
    strategy.setup_advanced_segmentation()
    strategy.create_campaign_strategies()
    
    # Salvar estrat√©gia em arquivo
    filename = strategy.save_strategy_to_file()
    
    # Imprimir resumo
    strategy.print_summary()
    
    print(f"\nüìÅ Arquivo da estrat√©gia salvo: {filename}")
    print("üéØ Pr√≥ximo passo: Implementar as estrat√©gias seguindo o plano criado!")

if __name__ == "__main__":
    main()
